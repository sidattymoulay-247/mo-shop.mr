<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>RIMSINA â€” Catalogue (MRU)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Commandez par WhatsApp â€¢ Paiement Ã  la livraison â€¢ Express 8â€“12 j / Standard 14â€“25 j. TÃ©lÃ©phones, accessoires, solaire, maison. Mauritanie." />

  <!-- Social share -->
  <meta property="og:title" content="RIMSINA â€” Catalogue (MRU)">
  <meta property="og:description" content="WhatsApp â€¢ Paiement Ã  la livraison â€¢ Express 8â€“12 j">
  <meta property="og:type" content="website">
  <meta property="og:image" content="assets/share.jpg">

  <link rel="icon" href="assets/favicon.png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Announcement bar -->
  <div class="announce" id="announce">
    <div class="container"></div>
  </div>

  <!-- Header / brand + filters -->
  <header class="container header">
    <a class="logo" href="#">
      <img src="assets/logo.png" alt="" onerror="this.style.display='none'">
      <div>
        <h1 data-brand>RIMSINA</h1>
        <p class="muted" id="tagline"></p>
      </div>
    </a>

    <!-- Language switch -->
    <div class="lang-switch" role="group" aria-label="Choisir la langue">
      <button id="btn-fr" class="lang active">FR</button>
      <button id="btn-ar" class="lang">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
    </div>

    <div class="toolbar" role="region" aria-label="Filtres produits">
      <input id="search" type="search" placeholder="" aria-label="">
      <select id="category" aria-label="">
        <!-- options filled by JS -->
      </select>
      <select id="sort" aria-label="">
        <!-- options filled by JS -->
      </select>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container hero-inner">
      <div class="hero-copy">
        <h2 id="hero-h"></h2>
        <ul id="hero-bullets"></ul>
        <a class="btn big" href="#grid" id="cta-browse"></a>
      </div>
      <div class="hero-art" aria-hidden="true">ğŸ“¦âš¡ğŸ“±</div>
    </div>
  </section>

  <!-- Category shortcuts -->
  <section class="container cats" aria-label="CatÃ©gories" id="cat-chips">
    <!-- chips filled by JS -->
  </section>

  <!-- Product grid -->
  <main class="container">
    <h3 class="section-title" id="section-best"></h3>
    <div id="grid" class="grid" aria-live="polite"></div>
    <p id="empty" class="muted" hidden></p>
  </main>

  <!-- How it works -->
  <section class="how container">
    <h3 class="section-title" id="section-how"></h3>
    <div class="steps" id="how-steps"></div>
  </section>

  <!-- Trust badges -->
  <section class="trust container" aria-label="Pourquoi nous choisir">
    <div class="trust-item" id="t1"></div>
    <div class="trust-item" id="t2"></div>
    <div class="trust-item" id="t3"></div>
    <div class="trust-item" id="t4"></div>
  </section>

  <!-- Footer -->
  <footer class="container footer">
    <h4 id="footer-title"></h4>
    <p id="footer-policy"></p>
    <p id="footer-contact"></p>
    <p>Â© <span id="year"></span> <span data-brand>RIMSINA</span></p>
  </footer>

  <!-- Sticky WhatsApp bubble -->
  <a class="wa-bubble" href="https://wa.me/22248440446" target="_blank" aria-label="WhatsApp">ğŸŸ¢</a>

  <!-- JS -->
  <script>
    // ===== Settings =====
    const BRAND_NAME = "RIMSINA";
    const WHATSAPP_NUMBER = "22248440446"; // your number without +
    const CURRENCY = "MRU";

    // Canonical categories (keys match products.json "category" values)
    const CATS = [
      { key: "Phones & Accessories", fr: "TÃ©lÃ©phones & Accessoires", ar: "Ø§Ù„Ù‡ÙˆØ§ØªÙ ÙˆØ§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª", emoji: "ğŸ“±" },
      { key: "Solar & Power",        fr: "Solaire & Ã‰nergie",         ar: "Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ© ÙˆØ§Ù„Ø·Ø§Ù‚Ø©",  emoji: "ğŸ”‹" },
      { key: "Home & Kitchen",       fr: "Maison & Cuisine",          ar: "Ø§Ù„Ù…Ù†Ø²Ù„ ÙˆØ§Ù„Ù…Ø·Ø¨Ø®",         emoji: "ğŸ " },
      { key: "Networking & CCTV",    fr: "RÃ©seau & CamÃ©ras",          ar: "Ø§Ù„Ø´Ø¨ÙƒØ§Øª ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©",       emoji: "ğŸ“¶" },
      { key: "Fashion & Gifts",      fr: "Mode & Cadeaux",            ar: "Ø§Ù„Ù…ÙˆØ¶Ø© ÙˆØ§Ù„Ù‡Ø¯Ø§ÙŠØ§",         emoji: "ğŸ" }
    ];

    // UI translations
    const I18N = {
      fr: {
        announce: "ğŸšš Express 8â€“12 j â€¢ Standard 14â€“25 j â€¢ ğŸ’µ Paiement Ã  la livraison (MRU)",
        tagline: "Commande WhatsApp â€¢ Paiement Ã  la livraison â€¢ DÃ©lai indiquÃ© par article",
        searchPH: "Rechercher un produitâ€¦",
        searchAL: "Recherche de produits",
        catAL: "Filtrer par catÃ©gorie",
        sortAL: "Trier les produits",
        sort: { label: "Trier", asc: "Prix â†‘", desc: "Prix â†“", newest: "NouveautÃ©s" },
        heroH: "Commandez sur WhatsApp. Payez Ã  la livraison.",
        heroBullets: [
          "Prix en MRU & dÃ©lai de livraison indiquÃ©s",
          "PrÃ©commandes depuis la Chine avec photos QC",
          "Garantie 7 jours (dÃ©fauts de fabrication)"
        ],
        browse: "Voir les meilleures ventes",
        best: "Meilleures ventes",
        empty: "Aucun produit trouvÃ©. Essayez une autre recherche ou catÃ©gorie.",
        how: "Comment Ã§a marche",
        howSteps: [
          "1. Choisissez lâ€™article & confirmez sur WhatsApp",
          "2. Achat & contrÃ´le qualitÃ© chez fournisseurs vÃ©rifiÃ©s",
          "3. Livraison Express 8â€“12 j / Standard 14â€“25 j",
          "4. Livraison en Mauritanie â€¢ Paiement Ã  la livraison"
        ],
        trust: ["âœ… Fournisseurs vÃ©rifiÃ©s","ğŸ›¡ï¸ Garantie dÃ©faut 7 jours","ğŸ’¬ Support local (Nouakchott)","ğŸ’³ Prix clairs en MRU"],
        footerTitle: "Livraison & Retours",
        footerPolicy: "Livraison Ã  Nouakchott (coursier/taxi) ; autres villes via gare routiÃ¨re. Retours : garantie dÃ©faut 7 jours (hors eau/choc). Les dÃ©lais de prÃ©commande sont des estimations soumises aux douanes.",
        footerContact: 'Contact : <a href="https://wa.me/22248440446" target="_blank" rel="noopener">WhatsApp 22 24 84 04 46</a> â€¢ Page Facebook',
        preorder: "PrÃ©commande",
        orderBtn: "Commander sur WhatsApp",
        allCats: "Toutes les catÃ©gories"
      },
      ar: {
        announce: "ğŸšš Ø³Ø±ÙŠØ¹ 8â€“12 ÙŠÙˆÙ… â€¢ Ø¹Ø§Ø¯ÙŠ 14â€“25 ÙŠÙˆÙ… â€¢ ğŸ’µ Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… (MRU)",
        tagline: "Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ â€¢ Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… â€¢ ÙŠÙˆØ¶Ø­ Ø²Ù…Ù† Ø§Ù„ØªØ³Ù„ÙŠÙ… Ù„ÙƒÙ„ Ù…Ù†ØªØ¬",
        searchPH: "Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬â€¦",
        searchAL: "Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
        catAL: "ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„ØµÙ†Ù",
        sortAL: "ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
        sort: { label: "ØªØ±ØªÙŠØ¨", asc: "Ø§Ù„Ø³Ø¹Ø± â†‘", desc: "Ø§Ù„Ø³Ø¹Ø± â†“", newest: "Ø§Ù„Ø£Ø­Ø¯Ø«" },
        heroH: "Ø§Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨. Ø§Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù….",
        heroBullets: [
          "Ø£Ø³Ø¹Ø§Ø± Ø¨Ø§Ù„Ù€ MRU ÙˆØ²Ù…Ù† ØªØ³Ù„ÙŠÙ… ÙˆØ§Ø¶Ø­",
          "Ø·Ù„Ø¨Ø§Øª Ù…Ø³Ø¨Ù‚Ø© Ù…Ù† Ø§Ù„ØµÙŠÙ† Ù…Ø¹ ØµÙˆØ± ÙØ­Øµ Ø§Ù„Ø¬ÙˆØ¯Ø©",
          "Ø¶Ù…Ø§Ù† 7 Ø£ÙŠØ§Ù… Ù„Ø¹ÙŠÙˆØ¨ Ø§Ù„ØªØµÙ†ÙŠØ¹"
        ],
        browse: "ØªØµÙØ­ Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§",
        best: "Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§",
        empty: "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª. Ø¬Ø±Ù‘Ø¨ Ø¨Ø­Ø«Ù‹Ø§ Ø£Ùˆ ØµÙ†ÙÙ‹Ø§ Ø¢Ø®Ø±.",
        how: "ÙƒÙŠÙ ØªØ¹Ù…Ù„ Ø§Ù„Ø®Ø¯Ù…Ø©",
        howSteps: [
          "1. Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØªØ¬ Ùˆ Ø£ÙƒØ¯ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨",
          "2. Ù†Ø´ØªØ±ÙŠ ÙˆÙ†ÙØ­Øµ Ù…Ù† Ù…ÙˆØ±Ø¯ÙŠÙ† Ù…ÙˆØ«ÙˆÙ‚ÙŠÙ†",
          "3. Ø´Ø­Ù† Ø³Ø±ÙŠØ¹ 8â€“12 ÙŠÙˆÙ… / Ø¹Ø§Ø¯ÙŠ 14â€“25 ÙŠÙˆÙ…",
          "4. ØªØ³Ù„ÙŠÙ… Ø¯Ø§Ø®Ù„ Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§ â€¢ Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"
        ],
        trust: ["âœ… Ù…ÙˆØ±Ø¯ÙˆÙ† Ù…ÙˆØ«ÙˆÙ‚ÙˆÙ†","ğŸ›¡ï¸ Ø¶Ù…Ø§Ù† Ø¹ÙŠÙˆØ¨ 7 Ø£ÙŠØ§Ù…","ğŸ’¬ Ø¯Ø¹Ù… Ù…Ø­Ù„ÙŠ (Ù†ÙˆØ§ÙƒØ´ÙˆØ·)","ğŸ’³ Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ø¶Ø­Ø© Ø¨Ø§Ù„Ù€ MRU"],
        footerTitle: "Ø§Ù„ØªØ³Ù„ÙŠÙ… ÙˆØ§Ù„Ø¥Ø±Ø¬Ø§Ø¹",
        footerPolicy: "ØªØ³Ù„ÙŠÙ… Ø¯Ø§Ø®Ù„ Ù†ÙˆØ§ÙƒØ´ÙˆØ· Ø¹Ø¨Ø± Ù…Ù†Ø¯ÙˆØ¨/ØªØ§ÙƒØ³ÙŠØ› ÙˆÙ…Ø¯Ù† Ø£Ø®Ø±Ù‰ Ø¹Ø¨Ø± Ù…Ø­Ø·Ø© Ø§Ù„Ù†Ù‚Ù„. Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹: Ø¶Ù…Ø§Ù† Ø¹ÙŠÙˆØ¨ ØªØµÙ†ÙŠØ¹ Ù„Ù…Ø¯Ø© 7 Ø£ÙŠØ§Ù… (Ù„Ø§ ÙŠØ´Ù…Ù„ Ø§Ù„Ù…Ø§Ø¡/Ø§Ù„Ø³Ù‚ÙˆØ·). Ø£Ø²Ù…Ù†Ø© Ø§Ù„ØªØ³Ù„ÙŠÙ… ØªÙ‚Ø¯ÙŠØ±ÙŠØ© ÙˆÙ‚Ø¯ ØªØªØ£Ø«Ø± Ø¨Ø§Ù„Ø¬Ù…Ø§Ø±Ùƒ.",
        footerContact: 'Ù„Ù„ØªÙˆØ§ØµÙ„: <a href="https://wa.me/22248440446" target="_blank" rel="noopener">ÙˆØ§ØªØ³Ø§Ø¨ 22 24 84 04 46</a> â€¢ ØµÙØ­Ø© ÙÙŠØ³Ø¨ÙˆÙƒ',
        preorder: "Ø·Ù„Ø¨ Ù…Ø³Ø¨Ù‚",
        orderBtn: "Ø§Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨",
        allCats: "ÙƒÙ„ Ø§Ù„Ø£ØµÙ†Ø§Ù"
      }
    };

    // Current language
    let LANG = "ar"; // or "ar"
    //let LANG = (navigator.language || "").startsWith("ar") ? "ar" : "fr";

    // Helpers
    function fmt(n){
      const loc = LANG === "ar" ? "ar" : "fr";
      try { return new Intl.NumberFormat(loc).format(n); }
      catch { return new Intl.NumberFormat('fr-FR').format(n); }
    }

    function t(path){
      // t('sort.label') etc.
      return path.split('.').reduce((o,k)=> (o||{})[k], I18N[LANG]);
    }

    function catLabel(enName){
      const c = CATS.find(x=>x.key===enName);
      if(!c) return enName;
      return LANG === "ar" ? c.ar : c.fr;
    }

    function waLink(p) {
      const name = p[`name_${LANG}`] || p.name;
      const msg = `[Order]
${LANG==='ar' ? 'Ø§Ù„Ù…Ù†ØªØ¬' : 'Produit'}: ${name}
SKU: ${p.id}
${LANG==='ar' ? 'Ø§Ù„Ø³Ø¹Ø±' : 'Prix'}: ${fmt(p.price_mru)} ${CURRENCY}
${LANG==='ar' ? 'Ø§Ù„ÙƒÙ…ÙŠØ©' : 'QtÃ©'}: 1
${LANG==='ar' ? 'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©' : 'Ville'}:
${LANG==='ar' ? 'Ø§Ù„Ø§Ø³Ù…' : 'Nom'}:
${LANG==='ar' ? 'Ø§Ù„Ù‡Ø§ØªÙ' : 'TÃ©lÃ©phone'}:
${LANG==='ar' ? 'Ø§Ù„Ø¹Ù†ÙˆØ§Ù†' : 'Adresse'}:`;
      return `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`;
    }

    // Inject UI text for current language
    function renderStaticText(){
      document.documentElement.lang = LANG === "ar" ? "ar" : "fr";
      document.body.dir = LANG === "ar" ? "rtl" : "ltr";
      document.body.classList.toggle('rtl', LANG === "ar");

      document.querySelectorAll('[data-brand]').forEach(el => el.textContent = BRAND_NAME);
      document.getElementById('year').textContent = new Date().getFullYear();

      document.querySelector('.announce .container').textContent = t('announce');
      document.getElementById('tagline').textContent = t('tagline');

      // Filters
      const search = document.getElementById('search');
      search.placeholder = t('searchPH');
      search.setAttribute('aria-label', t('searchAL'));
      document.getElementById('category').setAttribute('aria-label', t('catAL'));
      document.getElementById('sort').setAttribute('aria-label', t('sortAL'));

      // Build category select with canonical keys as values
      const catSel = document.getElementById('category');
      catSel.innerHTML = "";
      const optAll = document.createElement('option');
      optAll.value = "";
      optAll.textContent = t('allCats');
      catSel.appendChild(optAll);
      CATS.forEach(c=>{
        const o = document.createElement('option');
        o.value = c.key; // canonical value, used for filtering
        o.textContent = (LANG==='ar'? c.ar : c.fr);
        catSel.appendChild(o);
      });

      // Sort select
      const sortSel = document.getElementById('sort');
      sortSel.innerHTML = "";
      const s0 = new Option(t('sort.label'), "");
      const s1 = new Option(t('sort.asc'), "price-asc");
      const s2 = new Option(t('sort.desc'), "price-desc");
      const s3 = new Option(t('sort.newest'), "newest");
      [s0,s1,s2,s3].forEach(o=>sortSel.add(o));

      // Hero
      document.getElementById('hero-h').textContent = t('heroH');
      const ul = document.getElementById('hero-bullets');
      ul.innerHTML = "";
      t('heroBullets').forEach(li=>{
        const el = document.createElement('li');
        el.textContent = li;
        ul.appendChild(el);
      });
      document.getElementById('cta-browse').textContent = t('browse');

      // Category chips
      const chips = document.getElementById('cat-chips');
      chips.innerHTML = "";
      CATS.forEach(c=>{
        const a = document.createElement('a');
        a.className = "cat";
        a.dataset.cat = c.key; // filtering key
        a.innerHTML = `${c.emoji}<span>${LANG==='ar'? c.ar : c.fr}</span>`;
        a.addEventListener('click', ()=>{
          document.getElementById('category').value = c.key;
          applyFilters();
          window.scrollTo({ top: document.getElementById('grid').offsetTop - 20, behavior: 'smooth' });
        });
        chips.appendChild(a);
      });

      // Sections
      document.getElementById('section-best').textContent = t('best');
      document.getElementById('section-how').textContent = t('how');
      const steps = document.getElementById('how-steps');
      steps.innerHTML = "";
      t('howSteps').forEach(s=>{
        const d = document.createElement('div');
        d.className = "step";
        d.textContent = s;
        steps.appendChild(d);
      });

      // Trust
      document.getElementById('t1').textContent = t('trust')[0];
      document.getElementById('t2').textContent = t('trust')[1];
      document.getElementById('t3').textContent = t('trust')[2];
      document.getElementById('t4').textContent = t('trust')[3];

      // Footer
      document.getElementById('footer-title').textContent = t('footerTitle');
      document.getElementById('footer-policy').textContent = t('footerPolicy');
      document.getElementById('footer-contact').innerHTML = t('footerContact');

      // Buttons state
      document.getElementById('btn-fr').classList.toggle('active', LANG==='fr');
      document.getElementById('btn-ar').classList.toggle('active', LANG==='ar');
    }

    // Render a product card (uses FR/AR fields if present)
    function cardHTML(p){
      const name = p[`name_${LANG}`] || p.name;
      const desc = p[`desc_${LANG}`] || p.description || "";
      const eta = p.eta || "";
      const preorder = p.preorder ? `<span class="badge warn">${t('preorder')}</span>` : "";
      const img = (p.images && p.images[0]) ? p.images[0] : "assets/placeholder.jpg";
      const cat = catLabel(p.category || "");
      return `
        <article class="card">
          <div class="thumb">
            <img loading="lazy" src="${img}" alt="${name}">
            ${preorder}
            ${eta ? `<span class="badge">${eta}</span>` : ""}
          </div>
          <div class="card-body">
            <h3 title="${name}">${name}</h3>
            <p class="price">${fmt(p.price_mru)} <span class="cur">${CURRENCY}</span></p>
            <p class="muted small">${cat}</p>
            <p class="desc">${desc}</p>
            <a class="btn" href="${waLink(p)}" target="_blank" rel="noopener">${t('orderBtn')}</a>
          </div>
        </article>`;
    }

    let PRODUCTS = [];

    function applyFilters(){
      const q = document.getElementById('search').value.trim().toLowerCase();
      const catVal = document.getElementById('category').value;
      const sortVal = document.getElementById('sort').value;

      let items = PRODUCTS.slice();

      if (q) items = items.filter(p => {
        const name = (p[`name_${LANG}`] || p.name || "").toLowerCase();
        const desc = (p[`desc_${LANG}`] || p.description || "").toLowerCase();
        return name.includes(q) || desc.includes(q);
      });

      if (catVal) items = items.filter(p => (p.category === catVal));

      if (sortVal === "price-asc") items.sort((a,b)=> a.price_mru - b.price_mru);
      if (sortVal === "price-desc") items.sort((a,b)=> b.price_mru - a.price_mru);
      if (sortVal === "newest") items.sort((a,b)=> (b.created||0) - (a.created||0));

      const grid = document.getElementById('grid');
      grid.innerHTML = items.map(cardHTML).join("");

      const empty = document.getElementById('empty');
      empty.hidden = items.length !== 0;
      if (items.length === 0) empty.textContent = t('empty');
    }
    window.applyFilters = applyFilters;

    // Language switch handlers
    document.getElementById('btn-fr').onclick = ()=>{ LANG='fr'; renderStaticText(); applyFilters(); };
    document.getElementById('btn-ar').onclick = ()=>{ LANG='ar'; renderStaticText(); applyFilters(); };

    // Initial render
    renderStaticText();

    // Load products.json
    fetch('products.json')
      .then(r => r.json())
      .then(data => { PRODUCTS = data; applyFilters(); })
      .catch(()=> {
        const empty = document.getElementById('empty');
        empty.hidden = false;
        empty.textContent = "Impossible de charger products.json / ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ products.json";
      });

    // Update labels for inputs after language render
    document.getElementById('search').addEventListener('input', applyFilters);
    document.getElementById('category').addEventListener('input', applyFilters);
    document.getElementById('sort').addEventListener('input', applyFilters);
  </script>
</body>
</html>
